#!/bin/bash

echo "ðŸš€ DÃ©marrage de l'application sur Railway"

# CrÃ©er un script Python qui simule un terminal
python3 -c "
import sys
import subprocess
import select

print('Simulation de terminal pour Railway...')

# ExÃ©cuter votre programme
proc = subprocess.Popen(
    ['python3', 'main.py'],
    stdin=subprocess.PIPE,
    stdout=subprocess.PIPE,
    stderr=subprocess.PIPE,
    text=True,
    bufsize=1
)

# Envoyer automatiquement '1' pour choisir le mode dÃ©monstration
proc.stdin.write('1\\n')
proc.stdin.flush()

# Lire la sortie
while True:
    output = proc.stdout.readline()
    if output == '' and proc.poll() is not None:
        break
    if output:
        print(output.strip())

# Attendre la fin
proc.wait()
print(f'âœ… TerminÃ© avec code: {proc.returncode}')

# Garder le conteneur en vie
print('ðŸ”„ Mode serveur actif...')
import time
time.sleep(999999)
"

# Alternative avec timeout
echo "Application terminÃ©e, maintien du service..."
sleep infinity
